<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Rozha+One&family=Tiro+Devanagari+Hindi:ital@0;1&display=swap" rel="stylesheet">
<!-- ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§ü‡•Ç‡§≤ -->
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<style>
    :root { --saffron: #FF9933; --maroon: #800000; --gold: #FFD700; --cream: #fff5e6; }
    
    body {
        margin: 0; padding: 0;
        font-family: 'Tiro Devanagari Hindi', serif;
        background: radial-gradient(circle, #ffcc80, #ff9933, #e65100);
        min-height: 100vh;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        overflow-x: hidden;
    }

    /* --- CAPTURE WRAPPER --- */
    .capture-area {
        position: relative;
        width: 100%;
        max-width: 420px;
        padding: 5px;
        display: flex; justify-content: center;
    }

    .card {
        background: #fff;
        width: 100%;
        border: 4px solid var(--gold);
        border-radius: 15px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 0 30px rgba(139, 0, 0, 0.5);
    }

    .top-decor { font-size: 35px; color: var(--saffron); margin-top: -10px; }
    h1 { font-family: 'Rozha One', serif; color: var(--maroon); font-size: 26px; margin: 5px 0; }
    .year { font-size: 45px; background: linear-gradient(to right, #ff512f, #dd2476); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; }
    
    .wishes-text {
        background: var(--cream); color: #d84315; padding: 10px;
        border-radius: 8px; font-weight: bold; font-size: 15px;
        margin: 10px 0; border-left: 5px solid var(--saffron);
    }

    /* --- PHOTO FRAME --- */
    .photo-frame {
        width: 100%; height: 320px;
        background-color: #000;
        border: 4px double var(--gold);
        border-radius: 10px;
        margin: 10px 0;
        overflow: hidden; display: flex; align-items: center; justify-content: center;
    }
    #userPhoto { width: 100%; height: 100%; object-fit: contain; }

    /* --- LINK VISIBLE IN PHOTO --- */
    .link-watermark {
        background: #000; color: #fff;
        font-size: 12px; padding: 5px 10px;
        border-radius: 20px; margin-top: 10px;
        display: inline-block;
        font-family: sans-serif;
        border: 1px solid var(--gold);
    }

    /* --- CONTROLS --- */
    .controls-area {
        width: 90%; max-width: 400px;
        margin-top: 15px; text-align: center; z-index: 20;
        padding-bottom: 20px;
    }

    .file-btn {
        background: var(--maroon); color: white; padding: 10px 25px;
        border-radius: 50px; cursor: pointer; font-size: 14px;
        display: inline-block; box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .share-btn {
        background: #25D366; color: white; border: none; width: 100%; padding: 15px;
        font-size: 18px; font-weight: bold; border-radius: 8px;
        cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3); margin-top: 15px;
        animation: pulse 2s infinite;
    }

    #loading { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:9999; color:white; text-align:center; padding-top:40vh; font-size:18px; }

    .ad-box { background:#f4f4f4; padding:2px; margin-top:5px; border:1px dashed #ccc; display:flex; justify-content:center; }
    #bgCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

</style>
</head>
<body onclick="playAudio()">

    <audio id="bgMusic" loop>
        <source src="wishes.mp3" type="audio/mp3">
    </audio>
    <canvas id="bgCanvas"></canvas>

    <div id="loading">
        <div style="font-size:40px;">üîÑ</div>
        <br>‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç...<br>WhatsApp ‡§ñ‡•Å‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à...
    </div>

    <!-- ===== CARD (Photo Area) ===== -->
    <div class="capture-area" id="cardToShare">
        <div class="card">
            <div class="top-decor">üïâÔ∏è ‚ú® üïâÔ∏è</div>
            <h1>‡§®‡§µ ‡§µ‡§∞‡•ç‡§∑ ‡§ï‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç<br><span class="year">2026</span></h1>
            
            <div class="wishes-text">
                "‡§Ü‡§™‡§ï‡•ã ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§™‡•Ç‡§∞‡•á ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã<br>
                ‡§®‡§è ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç‡•§"<br>
                üôè ‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ üôè
            </div>

            <!-- PHOTO -->
            <div class="photo-frame">
                <img id="userPhoto" src="https://cdn-icons-png.flaticon.com/512/8802/8802672.png" crossorigin="anonymous" alt="Photo">
            </div>

            <!-- AD 1 (Inside Photo) -->
            <div class="ad-box">
                <script>
                    atOptions = { 'key' : '4acc0331fedb6a2050fa6fc5179175d7', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
                </script>
                <script type="text/javascript" src="https://www.highperformanceformat.com/4acc0331fedb6a2050fa6fc5179175d7/invoke.js"></script>
            </div>

            <!-- Link Visual -->
            <div class="link-watermark">
                Create Here: happy-new-year-2026-livid.vercel.app
            </div>
        </div>
    </div>

    <!-- CONTROLS -->
    <div class="controls-area">
        <label class="file-btn">
            üì∏ ‡§´‡•ã‡§ü‡•ã ‡§¨‡§¶‡§≤‡•á‡§Ç
            <input type="file" style="display:none" accept="image/*" onchange="uploadImage(event)">
        </label>

        <!-- SHARE BUTTON -->
        <button class="share-btn" onclick="shareCard()">
            üöÄ WhatsApp ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç (Link + Photo)
        </button>
        
        <!-- AD 2 (Outside) -->
        <div class="ad-box" style="margin-top:15px;">
            <script async="async" data-cfasync="false" src="https://pl28208324.effectivegatecpm.com/2d3e3e20d096ece9151df243cb876ebf/invoke.js"></script>
            <div id="container-2d3e3e20d096ece9151df243cb876ebf"></div>
        </div>
    </div>

<script>
    const audio = document.getElementById('bgMusic');
    window.onload = function() { initAnimation(); }
    function playAudio() { if(audio.paused) audio.play(); }

    function uploadImage(event) {
        const file = event.target.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                document.getElementById('userPhoto').src = e.target.result;
                playAudio();
            }
            reader.readAsDataURL(file);
        }
    }

    /* MAGIC SHARE LOGIC */
    async function shareCard() {
        const loading = document.getElementById('loading');
        loading.style.display = 'block';

        try {
            // 1. Create Image
            const canvas = await html2canvas(document.getElementById('cardToShare'), {
                scale: 2, backgroundColor: null, useCORS: true
            });

            canvas.toBlob(async (blob) => {
                const file = new File([blob], "HappyNewYear2026.png", { type: "image/png" });

                // 2. CREATE PERFECT LINK MESSAGE
                // \n ‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§π‡•à ‡§®‡§à ‡§≤‡§æ‡§á‡§®‡•§ ‡§π‡§Æ‡§®‡•á ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•á ‡§ä‡§™‡§∞ ‡§î‡§∞ ‡§®‡•Ä‡§ö‡•á ‡§ú‡§ó‡§π ‡§¶‡•Ä ‡§π‡•à‡•§
                const myLink = "https://happy-new-year-2026-livid.vercel.app";
                const shareText = `‚ú® ‡§Æ‡•á‡§∞‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§ï‡•á ‡§∏‡§æ‡§• ‡§®‡§è ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§¨‡§ß‡§æ‡§à ‡§¶‡•á‡§ñ‡•á‡§Ç! üëá\n\nüîó ‡§Ö‡§™‡§®‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ø‡§π‡§æ‡§Å ‡§¨‡§®‡§æ‡§Ø‡•á‡§Ç:\n${myLink}\n\nüëÜ ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç üëÜ`;

                // 3. SHARE
                if (navigator.share) {
                    try {
                        await navigator.share({
                            files: [file],
                            title: 'Happy New Year',
                            text: shareText // ‡§Ø‡§π ‡§≤‡§ø‡§Ç‡§ï WhatsApp ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§Ø‡•á‡§ó‡§æ
                        });
                    } catch (err) {
                        console.log("Share closed");
                    }
                } else {
                    alert("Sharing not supported. Downloading image...");
                    const link = document.createElement('a');
                    link.download = 'Wishes.png';
                    link.href = canvas.toDataURL();
                    link.click();
                }
                loading.style.display = 'none';
            }, 'image/png');

        } catch (error) {
            console.error(error);
            loading.style.display = 'none';
        }
    }

    /* ANIMATION */
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    const colors = ['#FF9933', '#FFD700', '#fff'];
    
    function initAnimation(){
        for(let i=0; i<50; i++) particles.push({
            x: Math.random()*canvas.width, y: Math.random()*-canvas.height,
            size: Math.random()*5+3, speed: Math.random()*2+1,
            color: colors[Math.floor(Math.random()*colors.length)]
        });
        animate();
    }
    function animate(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>{
            ctx.fillStyle = p.color; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill();
            p.y+=p.speed; if(p.y>canvas.height) p.y=-10;
        });
        requestAnimationFrame(animate);
    }
</script>

</body>
</html>