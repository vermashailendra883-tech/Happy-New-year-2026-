<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year 2026</title>
<!-- ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§î‡§∞ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§∂ ‡§´‡•ã‡§Ç‡§ü‡•ç‡§∏ -->
<link href="https://fonts.googleapis.com/css2?family=Rozha+One&family=Tiro+Devanagari+Hindi:ital@0;1&display=swap" rel="stylesheet">
<!-- ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§≤‡•á‡§®‡•á ‡§ï‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü -->
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<style>
    :root {
        --saffron: #FF9933;
        --maroon: #800000;
        --gold: #FFD700;
        --cream: #fff5e6;
    }

    body {
        margin: 0;
        padding: 0;
        font-family: 'Tiro Devanagari Hindi', serif;
        background: radial-gradient(circle, #ffcc80, #ff9933, #e65100);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow-x: hidden;
    }

    /* --- CAPTURE AREA (‡§ú‡§ø‡§∏‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã ‡§¨‡§®‡•á‡§ó‡§æ) --- */
    .capture-wrapper {
        padding: 5px;
        width: 100%;
        max-width: 420px;
        display: flex;
        justify-content: center;
    }

    .card {
        position: relative;
        width: 100%;
        background: #fff;
        border: 4px solid var(--gold);
        border-radius: 15px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 0 40px rgba(139, 0, 0, 0.6);
        overflow: hidden;
    }

    /* ‡§ß‡§æ‡§∞‡•ç‡§Æ‡§ø‡§ï ‡§∏‡§ú‡§æ‡§µ‡§ü */
    .om-decor { font-size: 35px; color: var(--saffron); margin-top: -10px; }

    h1 {
        font-family: 'Rozha One', serif;
        color: var(--maroon);
        font-size: 26px;
        margin: 5px 0;
        text-shadow: 1px 1px 1px #ffcc80;
    }

    .year {
        font-size: 48px;
        background: linear-gradient(to right, #ff512f, #dd2476);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: bold;
    }

    /* ‡§¨‡§ß‡§æ‡§à ‡§∏‡§Ç‡§¶‡•á‡§∂ */
    .wishes-text {
        background: var(--cream);
        color: #d84315;
        padding: 10px;
        border-radius: 8px;
        font-weight: bold;
        font-size: 15px;
        margin: 10px 0;
        border-left: 5px solid var(--saffron);
        line-height: 1.4;
    }

    /* --- PHOTO FRAME --- */
    .photo-frame {
        width: 100%;
        height: 320px;
        background-color: #000;
        border: 4px double var(--gold);
        border-radius: 10px;
        margin: 10px 0;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
    }

    #userPhoto {
        width: 100%;
        height: 100%;
        object-fit: contain; /* ‡§´‡•ã‡§ü‡•ã ‡§™‡•Ç‡§∞‡•Ä ‡§¶‡§ø‡§ñ‡•á‡§ó‡•Ä */
    }

    /* --- LINK WATERMARK (‡§§‡§æ‡§ï‡§ø ‡§´‡•ã‡§ü‡•ã ‡§™‡§∞ ‡§≠‡•Ä ‡§≤‡§ø‡§Ç‡§ï ‡§¶‡§ø‡§ñ‡•á) --- */
    .link-watermark {
        background: #000;
        color: #fff;
        font-size: 11px;
        padding: 6px;
        border-radius: 20px;
        margin-top: 5px;
        display: inline-block;
        font-family: sans-serif;
        border: 1px solid var(--gold);
    }

    /* --- CONTROLS SECTION --- */
    .controls {
        width: 90%;
        max-width: 400px;
        margin-top: 15px;
        text-align: center;
        z-index: 20;
        padding-bottom: 20px;
    }

    .file-btn {
        background: var(--maroon);
        color: white;
        padding: 10px 25px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 14px;
        display: inline-block;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    /* MAIN SHARE BUTTON */
    .whatsapp-share-btn {
        background: linear-gradient(45deg, #25D366, #128C7E);
        color: white;
        width: 100%;
        padding: 15px;
        font-size: 18px;
        font-weight: bold;
        border: none;
        border-radius: 10px;
        margin-top: 15px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        animation: pulse 2s infinite;
    }

    /* LOADING OVERLAY */
    #loading {
        display: none;
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.85);
        z-index: 9999;
        color: white;
        text-align: center;
        padding-top: 45vh;
        font-size: 18px;
    }

    /* ADS */
    .ad-box {
        margin-top: 5px;
        padding: 2px;
        background: #f4f4f4;
        border: 1px dashed #ccc;
        display: flex;
        justify-content: center;
    }

    /* ANIMATION CANVAS */
    #bgCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

</style>
</head>
<body onclick="playAudio()">

    <!-- AUDIO -->
    <audio id="bgMusic" loop>
        <source src="wishes.mp3" type="audio/mp3">
    </audio>
    <canvas id="bgCanvas"></canvas>

    <!-- LOADING SCREEN -->
    <div id="loading">
        <div style="font-size:40px;">üîÑ</div>
        <br>‡§´‡•ã‡§ü‡•ã ‡§î‡§∞ ‡§≤‡§ø‡§Ç‡§ï ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...<br>‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç...
    </div>

    <!-- ===== CARD AREA (‡§Ø‡§π ‡§´‡•ã‡§ü‡•ã ‡§¨‡§®‡•á‡§ó‡§æ) ===== -->
    <div class="capture-wrapper" id="cardToShare">
        <div class="card">
            <div class="om-decor">üïâÔ∏è ‚ú® üïâÔ∏è</div>
            <h1>‡§®‡§µ ‡§µ‡§∞‡•ç‡§∑ ‡§ï‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç<br><span class="year">2026</span></h1>
            
            <div class="wishes-text">
                "‡§Ü‡§™‡§ï‡•ã ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§™‡•Ç‡§∞‡•á ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã<br>
                ‡§®‡§è ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç‡•§"<br>
                üôè ‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ üôè
            </div>

            <!-- PHOTO -->
            <div class="photo-frame">
                <!-- CrossOrigin Image is CRITICAL for screenshots -->
                <img id="userPhoto" src="https://cdn-icons-png.flaticon.com/512/8802/8802672.png" crossorigin="anonymous" alt="Card">
            </div>

            <!-- AD 1 (Card ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ - ‡§´‡•ã‡§ü‡•ã ‡§Æ‡•á‡§Ç ‡§Ü‡§è‡§ó‡§æ) -->
            <div class="ad-box">
                <script>
                    atOptions = { 'key' : '4acc0331fedb6a2050fa6fc5179175d7', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
                </script>
                <script type="text/javascript" src="https://www.highperformanceformat.com/4acc0331fedb6a2050fa6fc5179175d7/invoke.js"></script>
            </div>

            <!-- VISIBLE LINK (Watermark) -->
            <div class="link-watermark">
                ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§Ø‡•á‡§Ç: 
                <span style="color:#FFD700; font-weight:bold;">happy-new-year-2026-livid.vercel.app</span>
            </div>
        </div>
    </div>
    <!-- ===================================== -->

    <!-- CONTROLS -->
    <div class="controls">
        <label class="file-btn">
            üì∏ ‡§´‡•ã‡§ü‡•ã ‡§¨‡§¶‡§≤‡•á‡§Ç
            <input type="file" style="display:none" accept="image/*" onchange="uploadImage(event)">
        </label>

        <!-- SHARE BUTTON -->
        <button class="whatsapp-share-btn" onclick="shareCard()">
            üöÄ WhatsApp ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç (Link + Photo)
        </button>

        <!-- AD 2 (Card ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞) -->
        <div class="ad-box" style="margin-top:15px;">
            <script async="async" data-cfasync="false" src="https://pl28208324.effectivegatecpm.com/2d3e3e20d096ece9151df243cb876ebf/invoke.js"></script>
            <div id="container-2d3e3e20d096ece9151df243cb876ebf"></div>
        </div>
    </div>

<script>
    /* 1. AUDIO & ANIMATION */
    const audio = document.getElementById('bgMusic');
    window.onload = function() { initAnimation(); }
    function playAudio() { if(audio.paused) audio.play(); }

    /* 2. PHOTO UPLOAD */
    function uploadImage(event) {
        const file = event.target.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                document.getElementById('userPhoto').src = e.target.result;
                playAudio(); // ‡§´‡•ã‡§ü‡•ã ‡§¨‡§¶‡§≤‡§§‡•á ‡§π‡•Ä ‡§ó‡§æ‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç
            }
            reader.readAsDataURL(file);
        }
    }

    /* 3. MAGIC SHARE FUNCTION (PHOTO + LINK TEXT) */
    async function shareCard() {
        const loading = document.getElementById('loading');
        loading.style.display = 'block'; // ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§¶‡§ø‡§ñ‡§æ‡§ì

        try {
            // Step 1: ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã ‡§¨‡§®‡§æ‡§ì
            const canvas = await html2canvas(document.getElementById('cardToShare'), {
                scale: 2, // ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ï‡•ç‡§µ‡§æ‡§≤‡§ø‡§ü‡•Ä
                backgroundColor: null,
                useCORS: true // ‡§ú‡§∞‡•Å‡§∞‡•Ä ‡§π‡•à
            });

            // Step 2: ‡§´‡•ã‡§ü‡•ã ‡§ï‡•ã ‡§´‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•ã
            canvas.toBlob(async (blob) => {
                const file = new File([blob], "NewYear2026.png", { type: "image/png" });

                // Step 3: ‡§≤‡§ø‡§Ç‡§ï ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡•ã
                // Vercel ‡§ï‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§Ø‡§π‡§æ‡§Å ‡§ë‡§ü‡•ã‡§Æ‡•à‡§ü‡§ø‡§ï ‡§Ü ‡§ú‡§æ‡§Ø‡•á‡§ó‡§æ
                const myLink = "https://happy-new-year-2026-livid.vercel.app"; 
                
                const shareText = `‚ú® ‡§Æ‡•á‡§∞‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§ï‡•á ‡§∏‡§æ‡§• ‡§®‡§è ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§¨‡§ß‡§æ‡§à ‡§¶‡•á‡§ñ‡•á‡§Ç! üëá\n\nüîó ‡§Ö‡§™‡§®‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ø‡§π‡§æ‡§Å ‡§¨‡§®‡§æ‡§Ø‡•á‡§Ç:\n${myLink}`;

                // Step 4: ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•ã (Navigator Share API)
                if (navigator.share) {
                    try {
                        await navigator.share({
                            files: [file], // ‡§´‡•ã‡§ü‡•ã
                            title: 'Happy New Year',
                            text: shareText // ‡§Ø‡§π ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§Ü‡§è‡§ó‡§æ
                        });
                        console.log("Shared successfully");
                    } catch (err) {
                        console.log("User cancelled share");
                    }
                } else {
                    // ‡§Ö‡§ó‡§∞ ‡§¨‡•ç‡§∞‡§æ‡§â‡•õ‡§∞ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§® ‡§ï‡§∞‡•á (‡§ú‡•à‡§∏‡•á ‡§≤‡•à‡§™‡§ü‡•â‡§™ ‡§™‡§∞)
                    alert("Sharing not supported. Downloading image...");
                    const link = document.createElement('a');
                    link.download = 'NewYearCard.png';
                    link.href = canvas.toDataURL();
                    link.click();
                    // ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡•â‡§Æ‡•ç‡§™‡•ç‡§ü
                    prompt("‡§ï‡•É‡§™‡§Ø‡§æ ‡§á‡§∏ ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•ã ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§ï‡•á ‡§≠‡•á‡§ú‡•á‡§Ç:", myLink);
                }
                loading.style.display = 'none'; // ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§π‡§ü‡§æ‡§ì
            }, 'image/png');

        } catch (error) {
            console.error("Error:", error);
            alert("Error generating card.");
            loading.style.display = 'none';
        }
    }

    /* 4. FLOWER ANIMATION */
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    const colors = ['#FF9933', '#FFD700', '#fff'];
    
    function initAnimation(){
        for(let i=0; i<50; i++) particles.push({
            x: Math.random()*canvas.width, y: Math.random()*-canvas.height,
            size: Math.random()*5+3, speed: Math.random()*2+1,
            color: colors[Math.floor(Math.random()*colors.length)]
        });
        animate();
    }
    function animate(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>{
            ctx.fillStyle = p.color; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill();
            p.y+=p.speed; if(p.y>canvas.height) p.y=-10;
        });
        requestAnimationFrame(animate);
    }
</script>

</body>
</html>